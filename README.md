# Authentication API documentation
![Latest Stable Version](./version.svg)

## About tables and database environment
> The Database Management System used is MySQL.
> The version of PHP used is >8.x.
> 
> The structure of the API project is based on 4 tables:
> - users (model User)
> - token (model Template)
> - code_users (model CodeUser)
> ##### It is important to note that all tables use the soft delete system and also the timestamp provided by Lumen/Laravel tools. (PHP language)

### About Users:
> The User entity is the idealization center for this project. Your security and integrity of your data is the most important topic in all authentication mechanics.
> This entity has 3 important pieces of information: ***username***, ***password*** and ***email***.
> A second highlight in the database environment is the ***level***. It will indicate to the application the hierarchical level of permissions. (This feature will be implemented in the future).
> Both the ***username*** and ***email**** fields are, obligatorily, *unique fields*.
> Another important field in the database is the ***id***. This field will be very important, as it will bridge the gap between the User and all other Entities.

### About Tokens:
> The Token entity is an important entity because it will validate all requests after a login in the application. The User model will have a field called ***logged***, which is a boolean field. This way, in all requests, the middleware will check if the token exists, if the user is logged in, if the token is valid (based on the expiration date).
> If the token is not passed or is not valid, the app cannot be used.
> This entity has 3 important pieces of information: ***user_id***, ***token*** and ***expire_at***.
> The user_id field will link Token to User.
> The token also has an ***id*** field. It will indicate the token identifier.

### About CodeUser:
> The CodeUser Entity is called only in case of email/account verification or *forgotten password*.
> This entity only 2 information: ***user_id***, ***code***.
> When the user validates a code sent to his email, all codes linked to this user will be deleted.
> A code will be generated by AuthMailController and sent to the user's email. If the application does not find any User with the entered email, the application will return *"User not found."*